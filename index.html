<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ í‚¤ì˜¤ìŠ¤í¬</title>
    <style>
        /* ===== ê¸°ë³¸ ë¦¬ì…‹ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ===== CSS ë³€ìˆ˜ (ê³µí†µ ìƒ‰ìƒ) ===== */
        :root {
            --primary: #0984E3;
            --secondary: #6C5CE7;
            --accent: #00B894;
            --bg: #F8F9FA;
            --text: #2D3748;
            --border: #E2E8F0;

            /* ì—°ë ¹ë³„ í¬ê¸° ë³€ìˆ˜ (ê¸°ë³¸ê°’: ì„±ì¸) */
            --font-size: 16px;
            --btn-height: 48px;
            --btn-padding: 14px;
            --gap: 14px;
            --border-radius: 12px;
        }

        /* ===== ì—°ë ¹ë³„ í¬ê¸° ì„¤ì • ===== */
        body.age-child {
            --font-size: 24px;
            --btn-height: 70px;
            --btn-padding: 20px;
            --gap: 24px;
            --border-radius: 16px;
        }

        body.age-teen {
            --font-size: 18px;
            --btn-height: 56px;
            --btn-padding: 16px;
            --gap: 18px;
            --border-radius: 14px;
        }

        body.age-adult {
            --font-size: 16px;
            --btn-height: 48px;
            --btn-padding: 14px;
            --gap: 14px;
            --border-radius: 12px;
        }

        body.age-senior {
            --font-size: 32px;
            --btn-height: 90px;
            --btn-padding: 28px;
            --gap: 32px;
            --border-radius: 18px;
            font-weight: 700;
        }

        /* ===== ê¸°ë³¸ ìŠ¤íƒ€ì¼ ===== */
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            font-size: var(--font-size);
            line-height: 1.6;
        }

        /* ===== í—¤ë” ===== */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: calc(var(--gap) * 1.2) var(--gap);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: calc(var(--font-size) * 1.5);
            font-weight: 900;
        }

        .header-actions {
            display: flex;
            gap: calc(var(--gap) * 0.8);
        }

        /* ===== ë²„íŠ¼ ===== */
        .btn {
            background: white;
            color: var(--primary);
            border: none;
            border-radius: var(--border-radius);
            padding: calc(var(--btn-padding) * 0.8) calc(var(--btn-padding) * 1.2);
            font-size: calc(var(--font-size) * 0.9);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            height: auto;
            min-height: calc(var(--btn-height) * 0.8);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn.primary {
            background: var(--accent);
            color: white;
        }

        .btn.secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        /* ===== ë©”ì¸ ë ˆì´ì•„ì›ƒ ===== */
        main {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--gap);
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--gap);
        }

        /* ===== ë©”ë‰´ ì„¹ì…˜ ===== */
        .menu-section {
            background: white;
            border-radius: var(--border-radius);
            padding: var(--gap);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .section-title {
            font-size: calc(var(--font-size) * 1.3);
            font-weight: 800;
            margin-bottom: var(--gap);
            color: var(--text);
        }

        /* ===== ì¹´í…Œê³ ë¦¬ ===== */
        .categories {
            display: flex;
            gap: calc(var(--gap) * 0.6);
            margin-bottom: var(--gap);
            flex-wrap: wrap;
        }

        .category-btn {
            padding: calc(var(--btn-padding) * 0.7) calc(var(--btn-padding) * 1.2);
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: calc(var(--border-radius) * 2);
            font-size: calc(var(--font-size) * 0.95);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text);
        }

        .category-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .category-btn:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        /* ===== ë©”ë‰´ ê·¸ë¦¬ë“œ ===== */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: var(--gap);
        }

        .menu-item {
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: var(--border-radius);
            padding: var(--gap);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: calc(var(--gap) * 0.5);
        }

        .menu-item:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .menu-item-name {
            font-size: calc(var(--font-size) * 1.1);
            font-weight: 800;
            color: var(--text);
        }

        .menu-item-category {
            font-size: calc(var(--font-size) * 0.85);
            color: #718096;
        }

        .menu-item-price {
            font-size: calc(var(--font-size) * 1.2);
            font-weight: 900;
            color: var(--primary);
            margin-top: auto;
        }

        /* ===== ì¥ë°”êµ¬ë‹ˆ ===== */
        .cart-section {
            background: white;
            border-radius: var(--border-radius);
            padding: var(--gap);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            position: sticky;
            top: var(--gap);
            max-height: calc(100vh - var(--gap) * 2);
            overflow-y: auto;
        }

        .cart-items {
            display: flex;
            flex-direction: column;
            gap: calc(var(--gap) * 0.8);
            margin-bottom: var(--gap);
            max-height: 400px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: calc(var(--gap) * 0.8);
            background: var(--bg);
            border-radius: calc(var(--border-radius) * 0.8);
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 700;
            margin-bottom: 4px;
        }

        .cart-item-options {
            font-size: calc(var(--font-size) * 0.8);
            color: #718096;
        }

        .cart-item-price {
            font-weight: 800;
            color: var(--primary);
            font-size: calc(var(--font-size) * 1.1);
        }

        .cart-total {
            border-top: 2px solid var(--border);
            padding-top: var(--gap);
            margin-top: var(--gap);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-total-label {
            font-size: calc(var(--font-size) * 1.2);
            font-weight: 700;
        }

        .cart-total-amount {
            font-size: calc(var(--font-size) * 1.8);
            font-weight: 900;
            color: var(--primary);
        }

        .cart-actions {
            display: flex;
            flex-direction: column;
            gap: calc(var(--gap) * 0.6);
            margin-top: var(--gap);
        }

        .cart-actions .btn {
            width: 100%;
            height: var(--btn-height);
            font-size: var(--font-size);
        }

        /* ===== ëª¨ë‹¬ ===== */
        dialog {
            border: none;
            border-radius: var(--border-radius);
            padding: 0;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            margin: 0;
        }

        dialog::backdrop {
            background: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            padding: var(--gap);
        }

        .modal-title {
            font-size: calc(var(--font-size) * 1.4);
            font-weight: 800;
            margin-bottom: var(--gap);
        }

        .modal-options {
            display: flex;
            flex-direction: column;
            gap: var(--gap);
        }

        .option-group {
            display: flex;
            flex-direction: column;
            gap: calc(var(--gap) * 0.5);
        }

        .option-label {
            font-weight: 700;
            font-size: calc(var(--font-size) * 1.1);
        }

        .option-buttons {
            display: flex;
            gap: calc(var(--gap) * 0.5);
            flex-wrap: wrap;
        }

        .option-btn {
            padding: calc(var(--btn-padding) * 0.7) calc(var(--btn-padding) * 1.2);
            background: var(--bg);
            border: 2px solid var(--border);
            border-radius: calc(var(--border-radius) * 2);
            font-size: calc(var(--font-size) * 0.95);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .option-btn.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .modal-actions {
            display: flex;
            gap: var(--gap);
            margin-top: var(--gap);
        }

        .modal-actions .btn {
            flex: 1;
            height: var(--btn-height);
        }

        /* ===== ì—°ë ¹ ì„ íƒ ëª¨ë‹¬ ===== */
        .age-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--gap);
            margin-bottom: var(--gap);
        }

        .age-option {
            padding: calc(var(--gap) * 1.5);
            background: var(--bg);
            border: 3px solid var(--border);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: calc(var(--font-size) * 1.2);
            font-weight: 800;
        }

        .age-option:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        /* ===== ë°˜ì‘í˜• ===== */
        @media (max-width: 1200px) {
            main {
                grid-template-columns: 1fr;
            }

            .cart-section {
                position: static;
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== ë¹ˆ ìƒíƒœ ===== */
        .empty-state {
            text-align: center;
            padding: calc(var(--gap) * 3);
            color: #A0AEC0;
            font-size: calc(var(--font-size) * 1.1);
        }

        /* ===== ìŒì„± ì¸ì‹ ìƒíƒœ ===== */
        .voice-status {
            position: fixed;
            left: 20px;
            top: 100px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: calc(var(--gap) * 0.8) calc(var(--gap) * 1.2);
            border-radius: var(--border-radius);
            font-size: calc(var(--font-size) * 0.9);
            z-index: 2000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            max-width: 300px;
        }

        .voice-status.hidden {
            display: none;
        }

        /* ===== ì¹´ë©”ë¼ ìƒíƒœ ===== */
        .camera-status {
            position: fixed;
            right: 20px;
            top: 100px;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            padding: calc(var(--gap) * 0.6) calc(var(--gap) * 1);
            border-radius: var(--border-radius);
            font-size: calc(var(--font-size) * 0.8);
            z-index: 2000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .camera-status.hidden {
            display: none;
        }
    </style>
</head>

<body class="age-adult">

    <!-- í—¤ë” -->
    <header>
        <div class="logo">ğŸ• ìŠ¤ë§ˆíŠ¸ í‚¤ì˜¤ìŠ¤í¬</div>
        <div class="header-actions">
            <button class="btn secondary" id="cameraBtn">ğŸ“· ì¹´ë©”ë¼</button>
            <button class="btn secondary" id="ageBtn">ğŸ‘¤ ì—°ë ¹ ë³€ê²½</button>
            <button class="btn secondary" id="voiceBtn">ğŸ¤ ìŒì„± ì£¼ë¬¸</button>
        </div>
    </header>

    <!-- ìŒì„± ì¸ì‹ ìƒíƒœ -->
    <div class="voice-status hidden" id="voiceStatus">
        <div id="voiceStatusText">ìŒì„± ì¸ì‹ ì¤€ë¹„ ì¤‘...</div>
    </div>

    <!-- ì¹´ë©”ë¼ ìƒíƒœ -->
    <div class="camera-status hidden" id="cameraStatus">
        ğŸ“· ì¹´ë©”ë¼ ëŒ€ê¸° ì¤‘
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main>
        <!-- ë©”ë‰´ ì„¹ì…˜ -->
        <div class="menu-section">
            <h2 class="section-title">ë©”ë‰´ ì„ íƒ</h2>

            <!-- ì¹´í…Œê³ ë¦¬ -->
            <div class="categories" id="categories"></div>

            <!-- ë©”ë‰´ ê·¸ë¦¬ë“œ -->
            <div class="menu-grid" id="menuGrid"></div>
        </div>

        <!-- ì¥ë°”êµ¬ë‹ˆ -->
        <div class="cart-section">
            <h2 class="section-title">ì¥ë°”êµ¬ë‹ˆ</h2>

            <div class="cart-items" id="cartItems">
                <div class="empty-state">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</div>
            </div>

            <div class="cart-total">
                <div class="cart-total-label">í•©ê³„</div>
                <div class="cart-total-amount" id="cartTotal">â‚©0</div>
            </div>

            <div class="cart-actions">
                <button class="btn" id="clearBtn">ğŸ—‘ï¸ ë¹„ìš°ê¸°</button>
                <button class="btn primary" id="orderBtn" disabled>ì£¼ë¬¸í•˜ê¸°</button>
            </div>
        </div>
    </main>

    <!-- ì—°ë ¹ ì„ íƒ ëª¨ë‹¬ -->
    <dialog id="ageModal">
        <div class="modal-content">
            <h3 class="modal-title">ì—°ë ¹ëŒ€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
            <div class="age-selector">
                <div class="age-option" data-age="child">
                    <div style="font-size: 3rem;">ğŸ‘¶</div>
                    <div>ì–´ë¦°ì´</div>
                    <div style="font-size: 0.8em; color: #718096;">(0-12ì„¸)</div>
                </div>
                <div class="age-option" data-age="teen">
                    <div style="font-size: 3rem;">ğŸ§‘</div>
                    <div>ì²­ì†Œë…„</div>
                    <div style="font-size: 0.8em; color: #718096;">(13-19ì„¸)</div>
                </div>
                <div class="age-option" data-age="adult">
                    <div style="font-size: 3rem;">ğŸ‘¨</div>
                    <div>ì„±ì¸</div>
                    <div style="font-size: 0.8em; color: #718096;">(20-64ì„¸)</div>
                </div>
                <div class="age-option" data-age="senior">
                    <div style="font-size: 3rem;">ğŸ‘´</div>
                    <div>ë…¸ì¸</div>
                    <div style="font-size: 0.8em; color: #718096;">(65ì„¸ ì´ìƒ)</div>
                </div>
            </div>
            <button class="btn" onclick="document.getElementById('ageModal').close()" style="width: 100%;">ë‹«ê¸°</button>
        </div>
    </dialog>

    <!-- ì˜µì…˜ ì„ íƒ ëª¨ë‹¬ -->
    <dialog id="optionModal">
        <div class="modal-content">
            <h3 class="modal-title" id="optionTitle">ì˜µì…˜ ì„ íƒ</h3>

            <div class="modal-options">
                <div class="option-group">
                    <div class="option-label">ì‚¬ì´ì¦ˆ</div>
                    <div class="option-buttons" id="sizeOptions"></div>
                </div>

                <div class="option-group">
                    <div class="option-label">ë‹¹ë„</div>
                    <div class="option-buttons" id="sweetOptions"></div>
                </div>

                <div class="option-group">
                    <div class="option-label">ì–¼ìŒ</div>
                    <div class="option-buttons" id="iceOptions"></div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn" id="optionCancelBtn">ì·¨ì†Œ</button>
                <button class="btn primary" id="optionConfirmBtn">ë‹´ê¸°</button>
            </div>
        </div>
    </dialog>

    <script>
        // ë©”ë‰´ ë°ì´í„°
        const PRODUCTS = [
            { id: 'a1', cat: 'ì»¤í”¼', name: 'ì•„ë©”ë¦¬ì¹´ë…¸', price: 2500 },
            { id: 'a2', cat: 'ì»¤í”¼', name: 'ì¹´í˜ë¼ë–¼', price: 3200 },
            { id: 'a3', cat: 'ì»¤í”¼', name: 'ë°”ë‹ë¼ë¼ë–¼', price: 3600 },
            { id: 'a4', cat: 'ì»¤í”¼', name: 'ì¹´ë¼ë©œ ë§ˆë¼ì•„ë˜', price: 3800 },
            { id: 't1', cat: 'í‹°', name: 'ë…¹ì°¨', price: 2800 },
            { id: 't2', cat: 'í‹°', name: 'ì–¼ê·¸ë ˆì´', price: 3000 },
            { id: 't3', cat: 'í‹°', name: 'ìºëª¨ë§ˆì¼', price: 3000 },
            { id: 'c1', cat: 'ë””ì €íŠ¸', name: 'í•«ì´ˆì½”', price: 3000 },
            { id: 's1', cat: 'ë””ì €íŠ¸', name: 'ì¿ í‚¤', price: 1800 },
            { id: 's2', cat: 'ë””ì €íŠ¸', name: 'ë¨¸í•€', price: 2200 },
        ];

        const CATEGORIES = [...new Set(PRODUCTS.map(p => p.cat))];

        const OPTIONS = {
            size: [['S', 'ì†Œ'], ['M', 'ì¤‘'], ['L', 'ëŒ€']],
            sweet: [['0', 'ë¬´ê°€ë‹¹'], ['50', '50%'], ['100', '100%']],
            ice: [['less', 'ì ê²Œ'], ['normal', 'ë³´í†µ'], ['more', 'ë§ì´']]
        };

        // ìƒíƒœ
        let currentCategory = CATEGORIES[0];
        let cart = [];
        let selectedProduct = null;
        let selectedOptions = { size: 'M', sweet: '50', ice: 'normal' };

        // ì´ˆê¸°í™”
        function init() {
            renderCategories();
            renderMenu();
            renderCart();
            setupEventListeners();

            // ì´ˆê¸° ì—°ë ¹ ì„ íƒ
            setTimeout(() => {
                document.getElementById('ageModal').showModal();
            }, 500);
        }

        // ì¹´í…Œê³ ë¦¬ ë Œë”ë§
        function renderCategories() {
            const container = document.getElementById('categories');
            container.innerHTML = CATEGORIES.map(cat => `
        <button class="category-btn ${cat === currentCategory ? 'active' : ''}" 
                onclick="selectCategory('${cat}')">
          ${cat}
        </button>
      `).join('');
        }

        // ë©”ë‰´ ë Œë”ë§
        function renderMenu() {
            const container = document.getElementById('menuGrid');
            const items = PRODUCTS.filter(p => p.cat === currentCategory);

            container.innerHTML = items.map(item => `
        <div class="menu-item" onclick="selectMenu('${item.id}')">
          <div class="menu-item-name">${item.name}</div>
          <div class="menu-item-category">${item.cat}</div>
          <div class="menu-item-price">â‚©${item.price.toLocaleString()}</div>
        </div>
      `).join('');
        }

        // ì¥ë°”êµ¬ë‹ˆ ë Œë”ë§
        function renderCart() {
            const container = document.getElementById('cartItems');
            const totalEl = document.getElementById('cartTotal');
            const orderBtn = document.getElementById('orderBtn');

            if (cart.length === 0) {
                container.innerHTML = '<div class="empty-state">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</div>';
                totalEl.textContent = 'â‚©0';
                orderBtn.disabled = true;
                return;
            }

            let total = 0;
            container.innerHTML = cart.map((item, idx) => {
                const subtotal = item.price * item.qty;
                total += subtotal;
                return `
          <div class="cart-item">
            <div class="cart-item-info">
              <div class="cart-item-name">${item.name} x${item.qty}</div>
              <div class="cart-item-options">${item.size} / ${item.sweet} / ${item.ice}</div>
            </div>
            <div class="cart-item-price">â‚©${subtotal.toLocaleString()}</div>
          </div>
        `;
            }).join('');

            totalEl.textContent = `â‚©${total.toLocaleString()}`;
            orderBtn.disabled = false;
        }

        // ì¹´í…Œê³ ë¦¬ ì„ íƒ
        function selectCategory(cat) {
            currentCategory = cat;
            renderCategories();
            renderMenu();
        }

        // ë©”ë‰´ ì„ íƒ
        function selectMenu(id) {
            selectedProduct = PRODUCTS.find(p => p.id === id);
            selectedOptions = { size: 'M', sweet: '50', ice: 'normal' };

            document.getElementById('optionTitle').textContent = `[${selectedProduct.name}] ì˜µì…˜ ì„ íƒ`;

            // ì˜µì…˜ ë²„íŠ¼ ë Œë”ë§
            renderOptions('sizeOptions', 'size', OPTIONS.size);
            renderOptions('sweetOptions', 'sweet', OPTIONS.sweet);
            renderOptions('iceOptions', 'ice', OPTIONS.ice);

            document.getElementById('optionModal').showModal();
        }

        // ì˜µì…˜ ë Œë”ë§
        function renderOptions(containerId, optionType, options) {
            const container = document.getElementById(containerId);
            container.innerHTML = options.map(([value, label]) => `
        <button class="option-btn ${selectedOptions[optionType] === value ? 'selected' : ''}"
                onclick="selectOption('${optionType}', '${value}')">
          ${label}
        </button>
      `).join('');
        }

        // ì˜µì…˜ ì„ íƒ
        function selectOption(type, value) {
            selectedOptions[type] = value;
            renderOptions('sizeOptions', 'size', OPTIONS.size);
            renderOptions('sweetOptions', 'sweet', OPTIONS.sweet);
            renderOptions('iceOptions', 'ice', OPTIONS.ice);
        }

        // ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€
        function addToCart() {
            const key = `${selectedProduct.id}-${selectedOptions.size}-${selectedOptions.sweet}-${selectedOptions.ice}`;
            const existing = cart.find(item =>
                `${item.id}-${item.size}-${item.sweet}-${item.ice}` === key
            );

            if (existing) {
                existing.qty += 1;
            } else {
                cart.push({
                    ...selectedProduct,
                    ...selectedOptions,
                    qty: 1
                });
            }

            renderCart();
            document.getElementById('optionModal').close();
        }

        // ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
        function clearCart() {
            if (confirm('ì¥ë°”êµ¬ë‹ˆë¥¼ ë¹„ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                cart = [];
                renderCart();
            }
        }

        // ì£¼ë¬¸í•˜ê¸°
        function order() {
            if (cart.length === 0) return;

            const total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
            alert(`ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nì´ ê¸ˆì•¡: â‚©${total.toLocaleString()}`);
            cart = [];
            renderCart();
        }

        // ì—°ë ¹ ì„ íƒ
        function selectAge(age) {
            document.body.className = `age-${age}`;
            document.getElementById('ageModal').close();

            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            try {
                localStorage.setItem('kioskAgeGroup', age);
            } catch (e) { }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            // ì—°ë ¹ ì„ íƒ
            document.querySelectorAll('.age-option').forEach(el => {
                el.addEventListener('click', () => selectAge(el.dataset.age));
            });

            // ì—°ë ¹ ë³€ê²½ ë²„íŠ¼
            document.getElementById('ageBtn').addEventListener('click', () => {
                document.getElementById('ageModal').showModal();
            });

            // ì˜µì…˜ ëª¨ë‹¬
            document.getElementById('optionCancelBtn').addEventListener('click', () => {
                document.getElementById('optionModal').close();
            });

            document.getElementById('optionConfirmBtn').addEventListener('click', addToCart);

            // ì¥ë°”êµ¬ë‹ˆ
            document.getElementById('clearBtn').addEventListener('click', clearCart);
            document.getElementById('orderBtn').addEventListener('click', order);

            // ì €ì¥ëœ ì—°ë ¹ ë³µì›
            try {
                const savedAge = localStorage.getItem('kioskAgeGroup');
                if (savedAge) {
                    document.body.className = `age-${savedAge}`;
                }
            } catch (e) { }
        }

        // ì´ˆê¸°í™” ì‹¤í–‰
        init();
    </script>

    <!-- face-api.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>

    <!-- ìŒì„± ì¸ì‹ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="static/voice_recognition.js"></script>

    <!-- ì¹´ë©”ë¼ ì—°ë ¹ ê°ì§€ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="static/age_detection.js"></script>

    <!-- ì¹´ë©”ë¼ ë²„íŠ¼ ì´ë²¤íŠ¸ -->
    <script>
        const $cameraBtn = document.getElementById('cameraBtn');
        const $cameraStatus = document.getElementById('cameraStatus');
        let cameraActive = false;

        if ($cameraBtn) {
            $cameraBtn.addEventListener('click', async () => {
                if (!cameraActive) {
                    // ì¹´ë©”ë¼ ì‹œì‘
                    $cameraStatus.classList.remove('hidden');
                    $cameraStatus.textContent = 'ğŸ“· ì¹´ë©”ë¼ ì‹œì‘ ì¤‘...';

                    try {
                        await startAgeDetection();
                        cameraActive = true;
                        $cameraBtn.textContent = 'ğŸ“· ì¹´ë©”ë¼ ì¤‘ì§€';
                        $cameraBtn.classList.add('primary');
                        $cameraStatus.textContent = 'ğŸ“· ì—°ë ¹ ê°ì§€ ì¤‘';
                    } catch (error) {
                        $cameraStatus.textContent = 'âŒ ì¹´ë©”ë¼ ì˜¤ë¥˜';
                        setTimeout(() => $cameraStatus.classList.add('hidden'), 3000);
                    }
                } else {
                    // ì¹´ë©”ë¼ ì¤‘ì§€
                    stopAgeDetection();
                    cameraActive = false;
                    $cameraBtn.textContent = 'ğŸ“· ì¹´ë©”ë¼';
                    $cameraBtn.classList.remove('primary');
                    $cameraStatus.textContent = 'ğŸ“· ì¹´ë©”ë¼ ì¤‘ì§€ë¨';
                    setTimeout(() => $cameraStatus.classList.add('hidden'), 2000);
                }
            });
        }
    </script>
</body>

</html>